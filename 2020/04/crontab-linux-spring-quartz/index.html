<!DOCTYPE html>
<html lang="zh-cn">
    <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noodp"/>
    <meta name="author" content="lpnpcs">
    <meta name="description" content="lpnpcs的小地儿~">
    
    
    <link rel="prev" href="https://lpnpcs.fun/2020/04/recent-read-book/" />
    <link rel="next" href="https://lpnpcs.fun/2020/04/calligraphy-qigong/" />
    <link rel="canonical" href="https://lpnpcs.fun/2020/04/crontab-linux-spring-quartz/" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <title>
        
        
            crontab在linux、Spring、Quartz里的应用 | 朝花夕拾
        
    </title>
    <meta name="title" content="crontab在linux、Spring、Quartz里的应用 | 朝花夕拾">
    
<link rel="stylesheet" href="/css/main.min.css">


    




<link href="https://cdn.staticfile.org/highlight.js/10.0.1/styles/atom-one-light.min.css" rel="stylesheet" type="text/css" />
<script src="https://cdn.staticfile.org/highlight.js/10.0.1/highlight.min.js"></script>



<script src="https://cdn.staticfile.org/highlight.js/10.0.1/languages/java.min.js"></script>
<script src="https://cdn.staticfile.org/highlight.js/10.0.1/languages/yaml.min.js"></script>
<script src="https://cdn.staticfile.org/highlight.js/10.0.1/languages/go.min.js"></script>
<script src="https://cdn.staticfile.org/highlight.js/10.0.1/languages/json.min.js"></script>
<script src="https://cdn.staticfile.org/highlight.js/10.0.1/languages/bash.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    
    
 

<script type="application/ld+json">
{
    "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/lpnpcs.fun\/"
    },
    "articleSection" : "posts",
    "name" : "crontab在linux、Spring、Quartz里的应用",
    "headline" : "crontab在linux、Spring、Quartz里的应用",
    "description" : "",
    "inLanguage" : "zh-cn",
    "author" : "lpnpcs",
    "creator" : "lpnpcs",
    "publisher": "lpnpcs",
    "accountablePerson" : "lpnpcs",
    "copyrightHolder" : "lpnpcs",
    "copyrightYear" : "2020",
    "datePublished": "2020-04-01 00:00:00 \x2b0000 UTC",
    "dateModified" : "2020-04-01 00:00:00 \x2b0000 UTC",
    "url" : "https:\/\/lpnpcs.fun\/2020\/04\/crontab-linux-spring-quartz\/",
    "wordCount" : "1330",
    "keywords" : [ "technology","crontab","JAVA","Spring","经验", "朝花夕拾"]
}
</script>

  </head>
    <body class="">
        <div class="wrapper">
            <nav class="navbar">
    <div class="container">
        
            <div class="navbar-header header-back2home-logo">
                <span class="logo_mark" >>$</span>
                <a href="https://lpnpcs.fun/">
                    <span class="logo_text" >rm -rf /</span>
                    <span class="logo_cursor" ></span>
                </a>
            </div>
        
        <div class="navbar-right">
                
                <span class="menu">
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <span class="divide"></span>
                <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-dark-mode"></i></a>
                </span>
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar">
            <div class="navbar-header header-logo">
                    <a href="https://lpnpcs.fun/">朝花夕拾</a>
            </div>
            <div class="navbar-right">
                <div><a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-dark-mode"></i></a></div>
                <div class="menu-toggle">
                    <span></span><span></span><span></span>
                </div>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                <nav class="mb-md">
                    
                    
                        <a class="menu-item" href="/posts/" title="">
                            <h3>Blog</h3>
                            <div class="menu-active"></div>
                        </a>
                    
                        <a class="menu-item" href="/categories/" title="">
                            <h3>Categories</h3>
                            <div class="menu-active"></div>
                        </a>
                    
                        <a class="menu-item" href="/tags/" title="">
                            <h3>Tags</h3>
                            <div class="menu-active"></div>
                        </a>
                    
                </nav>
        </div>
    </div>
</nav>
            <main class="main">
                <div class="container">
                    
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">crontab在linux、Spring、Quartz里的应用</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://lpnpcs.fun/" rel="author">lpnpcs</a> 
                <span class="post-time">
                on <time datetime=2020-04-01 itemprop="datePublished">April 1, 2020</time>
                </span>
                in
                
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        
                        
                        
                          <a href="https://lpnpcs.fun/categories/%E6%8A%80%E6%9C%AF%E6%8F%90%E5%8D%87%E4%B9%8B%E8%B7%AF/"> 技术提升之路, </a>
                        
                        
                </span>
                <span class="post-word-count">1330 words</span>
        </div>
    </header>

    <div class="post-content">
        

        
        

        
        
        
        
        

        
        
        

        <p>CRON表达式是一个字符串，包含五个到七个由空格分隔的字段（每种软件不一样），表示一组时间，通常作为执行某个程序的时间表。</p>
<h2 id="例子">例子</h2>
<h3 id="linux">linux</h3>
<pre><code>例子：
# 每月的最后1天
0 0 L * * *

说明：
Linux
*    *    *    *    *
-    -    -    -    -
|    |    |    |    |
|    |    |    |    +----- day of week (0 - 7) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat
|    |    |    +---------- month (1 - 12) OR jan,feb,mar,apr ...
|    |    +--------------- day of month (1 - 31)
|    +-------------------- hour (0 - 23)
+------------------------- minute (0 - 59)
</code></pre><h3 id="javaspring">JAVA(Spring)</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">例子<span style="color:#960050;background-color:#1e0010">：</span>
<span style="color:#960050;background-color:#1e0010">#</span> 每月的最后1天
<span style="color:#a6e22e">@Scheduled</span><span style="color:#f92672">(</span>cron <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;0 0 18 28-31 * ?&#34;</span><span style="color:#f92672">)</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">doAtLastDayOfMonth</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">final</span> Calendar calendar <span style="color:#f92672">=</span> Calendar<span style="color:#f92672">.</span><span style="color:#a6e22e">getInstance</span><span style="color:#f92672">();</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>Calendar<span style="color:#f92672">.</span><span style="color:#a6e22e">DATE</span><span style="color:#f92672">)</span> <span style="color:#f92672">==</span> c<span style="color:#f92672">.</span><span style="color:#a6e22e">getActualMaximum</span><span style="color:#f92672">(</span>Calendar<span style="color:#f92672">.</span><span style="color:#a6e22e">DATE</span><span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// do something here...
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

说明<span style="color:#960050;background-color:#1e0010">：</span>
Java<span style="color:#f92672">(</span>Spring<span style="color:#f92672">)</span>
<span style="color:#f92672">*</span>    <span style="color:#f92672">*</span>    <span style="color:#f92672">*</span>    <span style="color:#f92672">*</span>    <span style="color:#f92672">*</span>    <span style="color:#f92672">*</span>
<span style="color:#f92672">-</span>    <span style="color:#f92672">-</span>    <span style="color:#f92672">-</span>    <span style="color:#f92672">-</span>    <span style="color:#f92672">-</span>    <span style="color:#f92672">-</span>
<span style="color:#f92672">|</span>    <span style="color:#f92672">|</span>    <span style="color:#f92672">|</span>    <span style="color:#f92672">|</span>    <span style="color:#f92672">|</span>    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#f92672">|</span>    <span style="color:#f92672">|</span>    <span style="color:#f92672">|</span>    <span style="color:#f92672">|</span>    <span style="color:#f92672">+-----</span> day of <span style="color:#a6e22e">week</span> <span style="color:#f92672">(</span>0 <span style="color:#f92672">-</span> 7<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Sunday<span style="color:#f92672">=</span>0 or 7<span style="color:#f92672">)</span> OR sun<span style="color:#f92672">,</span>mon<span style="color:#f92672">,</span>tue<span style="color:#f92672">,</span>wed<span style="color:#f92672">,</span>thu<span style="color:#f92672">,</span>fri<span style="color:#f92672">,</span>sat
<span style="color:#f92672">|</span>    <span style="color:#f92672">|</span>    <span style="color:#f92672">|</span>    <span style="color:#f92672">|</span>    <span style="color:#f92672">+----------</span> month <span style="color:#f92672">(</span>1 <span style="color:#f92672">-</span> 12<span style="color:#f92672">)</span> OR jan<span style="color:#f92672">,</span>feb<span style="color:#f92672">,</span>mar<span style="color:#f92672">,</span>apr <span style="color:#f92672">...</span>
<span style="color:#f92672">|</span>    <span style="color:#f92672">|</span>    <span style="color:#f92672">|</span>    <span style="color:#f92672">+---------------</span> day of <span style="color:#a6e22e">month</span> <span style="color:#f92672">(</span>1 <span style="color:#f92672">-</span> 31<span style="color:#f92672">)</span>
<span style="color:#f92672">|</span>    <span style="color:#f92672">|</span>    <span style="color:#f92672">+--------------------</span> hour <span style="color:#f92672">(</span>0 <span style="color:#f92672">-</span> 23<span style="color:#f92672">)</span>
<span style="color:#f92672">|</span>    <span style="color:#f92672">+-------------------------</span> min <span style="color:#f92672">(</span>0 <span style="color:#f92672">-</span> 59<span style="color:#f92672">)</span>
<span style="color:#f92672">+------------------------------</span> second <span style="color:#f92672">(</span>0 <span style="color:#f92672">-</span> 59<span style="color:#f92672">)</span>
</code></pre></div><h3 id="javaquartz">JAVA(Quartz)</h3>
<pre><code>例子：
# 每月的最后1天
@Scheduled(cron = &quot;0 0 18 L * ?&quot;)
public void doAtLastDayOfMonth() {
    // do something here...
}

说明：
Java(Quartz)
*    *    *    *    *    *    *
-    -    -    -    -    -    -
|    |    |    |    |    |    |
|    |    |    |    |    |    + year [optional]
|    |    |    |    |    +----- day of week (0 - 7) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat
|    |    |    |    +---------- month (1 - 12) OR jan,feb,mar,apr ...
|    |    |    +--------------- day of month (1 - 31)
|    |    +-------------------- hour (0 - 23)
|    +------------------------- min (0 - 59)
+------------------------------ second (0 - 59)
</code></pre><p>:::tip</p>
<p>Linux 支持5个域，Spring 支持6个 Quartz支持7个。</p>
<p>Quartz 的格式向下支持到秒级别的计划，而 UNIX cron 计划仅支持至分钟级。Quartz有七子域，而Scheduled只有6个子域（没有年）。但是Quartz也可以省略年这个子域。</p>
<p>:::</p>
<table>
<thead>
<tr>
<th align="left">字段</th>
<th align="left">是否必填</th>
<th align="left">允许值</th>
<th align="left">允许特殊字符</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Seconds</td>
<td align="left">是</td>
<td align="left">0–59</td>
<td align="left"><code>*``,``-</code></td>
<td align="left">标准实现不支持此字段。</td>
</tr>
<tr>
<td align="left">Minutes</td>
<td align="left">是</td>
<td align="left">0–59</td>
<td align="left"><code>*``,``-</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Hours</td>
<td align="left">是</td>
<td align="left">0–23</td>
<td align="left"><code>*``,``-</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Day of month</td>
<td align="left">是</td>
<td align="left">1–31</td>
<td align="left"><code>*``,``-``?``L``W</code></td>
<td align="left"><code>?``L``W</code>只有部分软件实现了</td>
</tr>
<tr>
<td align="left">Month</td>
<td align="left">是</td>
<td align="left">1–12 or JAN–DEC</td>
<td align="left"><code>*``,``-</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Day of week</td>
<td align="left">是</td>
<td align="left">0–6 or SUN–SAT</td>
<td align="left"><code>*``,``-``?``L``#</code></td>
<td align="left"><code>?``L``#</code>只有部分软件实现了</td>
</tr>
<tr>
<td align="left">Year</td>
<td align="left">否</td>
<td align="left">1970–2099</td>
<td align="left"><code>*``,``-</code></td>
<td align="left">标准实现不支持此字段。</td>
</tr>
</tbody>
</table>
<h4 id="标准字段">标准字段</h4>
<p><strong>逗号</strong>用于分隔列表。例如，在第5个字段(星期几)中使用 <code>MON,WED,FRI</code> 表示周一、周三和周五。</p>
<p><strong>连字符</strong>定义范围。例如，<code>2000-2010</code> 表示2000年至2010年期间的每年，包括2000年和2010年。</p>
<p>除非用反斜杠()转义，否则命令中的**百分号(%)**会被替换成换行符，第一个百分号后面的所有数据都会作为标准输入发送给命令。</p>
<h4 id="非标准字段">非标准字段</h4>
<p>**“L”**代表“Last”。当在星期几字段中使用的时候，可以指定给定月份的结构，例如“最后一个星期五”(<code>5L</code>)。在月日字段中，可以指定一个月的最后一天。</p>
<p>“day of month”字段可以使用**“W”**字符。指定最接近给定日期的工作日（星期一-星期五）。例如，<code>15W</code>，意思是：“最接近该月15日的工作日。”；所以，如果15号是星期六，触发器在14号星期五触发。如果15日是星期天，触发器在16日星期一触发。如果15号是星期二，那么它在15号星期二触发。“1W”，如果这个月的第一天是星期六，不会跨到上个月，触发器会在这个月的第三天（也就是星期一）触发。只有指定一天（不能是范围或列表）的时候，才能指定“W”字符。</p>
<p>星期几字段可以使用**“#”**，后面必须跟一个介于1和5之间的数字。例如，<code>5#3</code>表示每个月的第三个星期五。</p>
<p>在某些实现中，**“?”<strong>用来代替“*”以将月中的某一天或周中的某一天留空。其他cron的实现是替换</strong>“?”*<em>为cron守护进程的启动时间，例如：？？</em> * * *，如果cron在上午8:25启动，将更新为25 8 * * * *并在每天的这个时间运行，直到再次重新启动。</p>
<p>分钟字段设置 <code>***/**5</code>表示每5分钟一次，注意：这里指的是能被5整除的分钟数。</p>
    </div>

    <div class="post-copyright">
            
            <p class="copyright-item">
                <span>Author:</span>
                <span>lpnpcs </span>
                </p>
            

            
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://lpnpcs.fun/2020/04/crontab-linux-spring-quartz/>https://lpnpcs.fun/2020/04/crontab-linux-spring-quartz/</span>
            </p>
            
            
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>


    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s):
            
            <span class="tag"><a href="https://lpnpcs.fun/tags/technology/">
                    #technology</a></span>
            
            <span class="tag"><a href="https://lpnpcs.fun/tags/crontab/">
                    #crontab</a></span>
            
            <span class="tag"><a href="https://lpnpcs.fun/tags/java/">
                    #JAVA</a></span>
            
            <span class="tag"><a href="https://lpnpcs.fun/tags/spring/">
                    #Spring</a></span>
            
            <span class="tag"><a href="https://lpnpcs.fun/tags/%E7%BB%8F%E9%AA%8C/">
                    #经验</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> ·
                <span><a href="https://lpnpcs.fun/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://lpnpcs.fun/2020/04/recent-read-book/" class="prev" rel="prev" title="最近读过的书"><i class="iconfont icon-left"></i>&nbsp;最近读过的书</a>
        
        
        <a href="https://lpnpcs.fun/2020/04/calligraphy-qigong/" class="next" rel="next" title="启功给你讲书法">启功给你讲书法&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
        
            
        
    </div>
</article>
                </div>
            </main>
            <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i>
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://lpnpcs.fun/">lpnpcs</a>  </span>
         

         
    </div>
</footer>


<script src="/js/main.js" defer ></script>



<script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js"></script>
<script> pangu.spacingPage();</script>

        </div>
    </body>
</html>
